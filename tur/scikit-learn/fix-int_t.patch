--- a/sklearn/utils/_random.pyx
+++ b/sklearn/utils/_random.pyx
@@ -1,3 +1,4 @@
+#cython: legacy_implicit_noexcept=True
 # Author: Hamzeh Alsalhi <ha258@cornell.edu>
 #
 # License: BSD 3 clause
--- a/sklearn/utils/_random.pxd
+++ b/sklearn/utils/_random.pxd
@@ -1,3 +1,7 @@
+# distutils: language=c++
+# cython: legacy_implicit_noexcept=True
+
+from numpy cimport intp_t as int_t
 
 cimport numpy as cnp
 
@@ -16,8 +20,8 @@ cdef enum:
     # 32-bit signed integers (i.e. 2^31 - 1).
     RAND_R_MAX = 2147483647
 
-cpdef sample_without_replacement(cnp.int_t n_population,
-                                 cnp.int_t n_samples,
+cpdef sample_without_replacement(cnp.intp_t n_population,
+                 
